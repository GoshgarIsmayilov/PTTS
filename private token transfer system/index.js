window.addEventListener('load', async () => {
    provider = new ethers.providers.Web3Provider(web3.currentProvider);

    await provider.send("eth_requestAccounts", []);

    $("#send-token-loader").hide();
    $("#receive-token-loader").hide();
});

var abi = JSON.parse('[{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"string","name":"publicKey","type":"string"}],"name":"consentToSend","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"uint256","name":"hashValue","type":"uint256"},{"internalType":"uint256","name":"hashReceiverBalanceAfter","type":"uint256"},{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"name":"privateReceive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"hashValue","type":"uint256"},{"internalType":"uint256","name":"hashSenderBalanceAfter","type":"uint256"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"name":"privateSend","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"}],"name":"requestToSend","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"tokenOwner","type":"address"}],"name":"balanceHashOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"}],"name":"getMessage","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getPublicKey","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hash_0","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hash_1","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hash_1000","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')

var bytecode = "60806040523480156200001157600080fd5b50604051620053b5380380620053b583398181016040528101906200003791906200031b565b81600090805190602001906200004f929190620000ce565b50806001908051906020019062000068929190620000ce565b506103e86002819055506f78b511acc44df31fd8dfd9a48dd71cc1600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505062000404565b828054620000dc90620003cf565b90600052602060002090601f0160209004810192826200010057600085556200014c565b82601f106200011b57805160ff19168380011785556200014c565b828001600101855582156200014c579182015b828111156200014b5782518255916020019190600101906200012e565b5b5090506200015b91906200015f565b5090565b5b808211156200017a57600081600090555060010162000160565b5090565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b620001e7826200019c565b810181811067ffffffffffffffff82111715620002095762000208620001ad565b5b80604052505050565b60006200021e6200017e565b90506200022c8282620001dc565b919050565b600067ffffffffffffffff8211156200024f576200024e620001ad565b5b6200025a826200019c565b9050602081019050919050565b60005b83811015620002875780820151818401526020810190506200026a565b8381111562000297576000848401525b50505050565b6000620002b4620002ae8462000231565b62000212565b905082815260208101848484011115620002d357620002d262000197565b5b620002e084828562000267565b509392505050565b600082601f8301126200030057620002ff62000192565b5b8151620003128482602086016200029d565b91505092915050565b6000806040838503121562000335576200033462000188565b5b600083015167ffffffffffffffff8111156200035657620003556200018d565b5b6200036485828601620002e8565b925050602083015167ffffffffffffffff8111156200038857620003876200018d565b5b6200039685828601620002e8565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620003e857607f821691505b602082108103620003fe57620003fd620003a0565b5b50919050565b614fa180620004146000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c806395d89b411161008c578063aaedc7c411610066578063aaedc7c41461024d578063ae077cb214610269578063eefe899c14610299578063f8df3470146102b7576100ea565b806395d89b41146101e15780639e987718146101ff5780639fccc62e1461022f576100ea565b806355448fe1116100c857806355448fe114610135578063703ae84f146101655780637cad5d6914610195578063857cdbb8146101b1576100ea565b806306fdde03146100ef5780631249c58b1461010d578063313ce56714610117575b600080fd5b6100f76102d5565b6040516101049190611188565b60405180910390f35b610115610363565b005b61011f6103b9565b60405161012c91906111c6565b60405180910390f35b61014f600480360381019061014a9190611253565b6103be565b60405161015c9190611188565b60405180910390f35b61017f600480360381019061017a9190611253565b6104cc565b60405161018c9190611299565b60405180910390f35b6101af60048036038101906101aa9190611253565b610515565b005b6101cb60048036038101906101c69190611253565b6105ad565b6040516101d89190611188565b60405180910390f35b6101e961067e565b6040516101f69190611188565b60405180910390f35b610219600480360381019061021491906114c7565b61070c565b6040516102269190611571565b60405180910390f35b610237610ab9565b6040516102449190611299565b60405180910390f35b61026760048036038101906102629190611641565b610acd565b005b610283600480360381019061027e919061169d565b610c54565b6040516102909190611571565b60405180910390f35b6102a161100a565b6040516102ae9190611299565b60405180910390f35b6102bf61101e565b6040516102cc9190611299565b60405180910390f35b600080546102e29061178c565b80601f016020809104026020016040519081016040528092919081815260200182805461030e9061178c565b801561035b5780601f106103305761010080835404028352916020019161035b565b820191906000526020600020905b81548152906001019060200180831161033e57829003601f168201915b505050505081565b6fe78c545b94afd16f42ef7592d99cd365600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550565b601281565b6060600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080546104479061178c565b80601f01602080910402602001604051908101604052809291908181526020018280546104739061178c565b80156104c05780601f10610495576101008083540402835291602001916104c0565b820191906000526020600020905b8154815290600101906020018083116104a357829003601f168201915b50505050509050919050565b6000600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6001600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b6060600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080546105f99061178c565b80601f01602080910402602001604051908101604052809291908181526020018280546106259061178c565b80156106725780601f1061064757610100808354040283529160200191610672565b820191906000526020600020905b81548152906001019060200180831161065557829003601f168201915b50505050509050919050565b6001805461068b9061178c565b80601f01602080910402602001604051908101604052809291908181526020018280546106b79061178c565b80156107045780601f106106d957610100808354040283529160200191610704565b820191906000526020600020905b8154815290600101906020018083116106e757829003601f168201915b505050505081565b600060011515600660008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515146107a857600080fd5b600760008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054861461083057600080fd5b6000600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054036108cc576f43003d2320d9f0e8ea9831a92759fb4b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b60006040516108da90611032565b604051809103906000f0801580156108f6573d6000803e3d6000fd5b50905060008173ffffffffffffffffffffffffffffffffffffffff1663aa24152287878760405180608001604052808e8152602001600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481526020018d815260200160018152506040518563ffffffff1660e01b815260040161099a94939291906119ea565b602060405180830381865afa1580156109b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109db9190611a5d565b90508015610aaa5786600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000600760008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b80925050509695505050505050565b6fe78c545b94afd16f42ef7592d99cd36581565b60011515600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151514610b6757600080fd5b6001600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555080600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209080519060200190610c4f92919061103f565b505050565b600060011515600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151514610cf057600080fd5b6000600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205403610d8c576f43003d2320d9f0e8ea9831a92759fb4b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b6000604051610d9a906110c5565b604051809103906000f080158015610db6573d6000803e3d6000fd5b50905060008173ffffffffffffffffffffffffffffffffffffffff1663aa24152287878760405180608001604052808f8152602001600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481526020018e815260200160018152506040518563ffffffff1660e01b8152600401610e5a94939291906119ea565b602060405180830381865afa158015610e77573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e9b9190611a5d565b90508015610ffa5787600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555088600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555086600860003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209080519060200190610ff892919061103f565b505b8092505050979650505050505050565b6f43003d2320d9f0e8ea9831a92759fb4b81565b6f78b511acc44df31fd8dfd9a48dd71cc181565b611a7180611a8b83390190565b82805461104b9061178c565b90600052602060002090601f01602090048101928261106d57600085556110b4565b82601f1061108657805160ff19168380011785556110b4565b828001600101855582156110b4579182015b828111156110b3578251825591602001919060010190611098565b5b5090506110c191906110d2565b5090565b611a70806134fc83390190565b5b808211156110eb5760008160009055506001016110d3565b5090565b600081519050919050565b600082825260208201905092915050565b60005b8381101561112957808201518184015260208101905061110e565b83811115611138576000848401525b50505050565b6000601f19601f8301169050919050565b600061115a826110ef565b61116481856110fa565b935061117481856020860161110b565b61117d8161113e565b840191505092915050565b600060208201905081810360008301526111a2818461114f565b905092915050565b600060ff82169050919050565b6111c0816111aa565b82525050565b60006020820190506111db60008301846111b7565b92915050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611220826111f5565b9050919050565b61123081611215565b811461123b57600080fd5b50565b60008135905061124d81611227565b92915050565b600060208284031215611269576112686111eb565b5b60006112778482850161123e565b91505092915050565b6000819050919050565b61129381611280565b82525050565b60006020820190506112ae600083018461128a565b92915050565b6112bd81611280565b81146112c857600080fd5b50565b6000813590506112da816112b4565b92915050565b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61131d8261113e565b810181811067ffffffffffffffff8211171561133c5761133b6112e5565b5b80604052505050565b600061134f6111e1565b905061135b8282611314565b919050565b600067ffffffffffffffff82111561137b5761137a6112e5565b5b602082029050919050565b600080fd5b600061139e61139984611360565b611345565b905080602084028301858111156113b8576113b7611386565b5b835b818110156113e157806113cd88826112cb565b8452602084019350506020810190506113ba565b5050509392505050565b600082601f830112611400576113ff6112e0565b5b600261140d84828561138b565b91505092915050565b600067ffffffffffffffff821115611431576114306112e5565b5b602082029050919050565b600061144f61144a84611416565b611345565b9050806040840283018581111561146957611468611386565b5b835b81811015611492578061147e88826113eb565b84526020840193505060408101905061146b565b5050509392505050565b600082601f8301126114b1576114b06112e0565b5b60026114be84828561143c565b91505092915050565b60008060008060008061016087890312156114e5576114e46111eb565b5b60006114f389828a0161123e565b965050602061150489828a016112cb565b955050604061151589828a016112cb565b945050606061152689828a016113eb565b93505060a061153789828a0161149c565b92505061012061154989828a016113eb565b9150509295509295509295565b60008115159050919050565b61156b81611556565b82525050565b60006020820190506115866000830184611562565b92915050565b600080fd5b600067ffffffffffffffff8211156115ac576115ab6112e5565b5b6115b58261113e565b9050602081019050919050565b82818337600083830152505050565b60006115e46115df84611591565b611345565b905082815260208101848484011115611600576115ff61158c565b5b61160b8482856115c2565b509392505050565b600082601f830112611628576116276112e0565b5b81356116388482602086016115d1565b91505092915050565b60008060408385031215611658576116576111eb565b5b60006116668582860161123e565b925050602083013567ffffffffffffffff811115611687576116866111f0565b5b61169385828601611613565b9150509250929050565b6000806000806000806000610180888a0312156116bd576116bc6111eb565b5b60006116cb8a828b0161123e565b97505060206116dc8a828b016112cb565b96505060406116ed8a828b016112cb565b955050606088013567ffffffffffffffff81111561170e5761170d6111f0565b5b61171a8a828b01611613565b945050608061172b8a828b016113eb565b93505060c061173c8a828b0161149c565b92505061014061174e8a828b016113eb565b91505092959891949750929550565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806117a457607f821691505b6020821081036117b7576117b661175d565b5b50919050565b600060029050919050565b600081905092915050565b6000819050919050565b6117e681611280565b82525050565b60006117f883836117dd565b60208301905092915050565b6000602082019050919050565b61181a816117bd565b61182481846117c8565b925061182f826117d3565b8060005b8381101561186057815161184787826117ec565b965061185283611804565b925050600181019050611833565b505050505050565b600060029050919050565b600081905092915050565b6000819050919050565b600081905092915050565b61189c816117bd565b6118a68184611888565b92506118b1826117d3565b8060005b838110156118e25781516118c987826117ec565b96506118d483611804565b9250506001810190506118b5565b505050505050565b60006118f68383611893565b60408301905092915050565b6000602082019050919050565b61191881611868565b6119228184611873565b925061192d8261187e565b8060005b8381101561195e57815161194587826118ea565b965061195083611902565b925050600181019050611931565b505050505050565b600060049050919050565b600081905092915050565b6000819050919050565b6000602082019050919050565b61199c81611966565b6119a68184611971565b92506119b18261197c565b8060005b838110156119e25781516119c987826117ec565b96506119d483611986565b9250506001810190506119b5565b505050505050565b600061018082019050611a006000830187611811565b611a0d604083018661190f565b611a1a60c0830185611811565b611a28610100830184611993565b95945050505050565b611a3a81611556565b8114611a4557600080fd5b50565b600081519050611a5781611a31565b92915050565b600060208284031215611a7357611a726111eb565b5b6000611a8184828501611a48565b9150509291505056fe608060405234801561001057600080fd5b50611a51806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063799afa761461003b578063aa2415221461006b575b600080fd5b6100556004803603810190610050919061169f565b61009b565b60405161006291906116fc565b60405180910390f35b610085600480360381019061008091906117c8565b610168565b60405161009291906116fc565b60405180910390f35b600080600467ffffffffffffffff8111156100b9576100b861137d565b5b6040519080825280602002602001820160405280156100e75781602001602082028036833780820191505090505b50905060005b60048110156101405783816004811061010957610108611831565b5b602002015182828151811061012157610120611831565b5b60200260200101818152505080806101389061188f565b9150506100ed565b50600061014d82866103e1565b0361015c576001915050610162565b60009150505b92915050565b6000610172611216565b60405180604001604052808760006002811061019157610190611831565b5b60200201518152602001876001600281106101af576101ae611831565b5b6020020151815250816000018190525060405180604001604052806040518060400160405280886000600281106101e9576101e8611831565b5b602002015160006002811061020157610200611831565b5b602002015181526020018860006002811061021f5761021e611831565b5b602002015160016002811061023757610236611831565b5b6020020151815250815260200160405180604001604052808860016002811061026357610262611831565b5b602002015160006002811061027b5761027a611831565b5b602002015181526020018860016002811061029957610298611831565b5b60200201516001600281106102b1576102b0611831565b5b602002015181525081525081602001819052506040518060400160405280856000600281106102e3576102e2611831565b5b602002015181526020018560016002811061030157610300611831565b5b602002015181525081604001819052506000600467ffffffffffffffff81111561032e5761032d61137d565b5b60405190808252806020026020018201604052801561035c5781602001602082028036833780820191505090505b50905060005b60048110156103b55784816004811061037e5761037d611831565b5b602002015182828151811061039657610395611831565b5b60200260200101818152505080806103ad9061188f565b915050610362565b5060006103c282846103e1565b036103d2576001925050506103d9565b6000925050505b949350505050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000190506000610411610578565b90508060800151516001865161042791906118d7565b1461043157600080fd5b60006040518060400160405280600081526020016000815250905060005b86518110156104ea578387828151811061046c5761046b611831565b5b60200260200101511061047e57600080fd5b6104d5826104d0856080015160018561049791906118d7565b815181106104a8576104a7611831565b5b60200260200101518a85815181106104c3576104c2611831565b5b6020026020010151610ae4565b610b86565b915080806104e29061188f565b91505061044f565b5061051481836080015160008151811061050757610506611831565b5b6020026020010151610b86565b905061055a8560000151866020015161052c84610c4e565b856040015161053e8a60400151610c4e565b87606001516105508960000151610c4e565b8960200151610cf3565b61056a5760019350505050610572565b600093505050505b92915050565b610580611249565b60405180604001604052807f2ec18bf2da99f994618fa7a9f2928f14c4c612251970ac8e6601783812964ed981526020017f0b3748078f1094f085191c15a7cfd72b78f36c5f1d8707877a82bd26cf7797408152508160000181905250604051806040016040528060405180604001604052807f1b4422e9141a25b6b15b8ac6f3e2e5b1f232799411884b6f1fd4d562e5717b3f81526020017f0bea62f1568fa985136098466429a1c087266b765f5f994bcc1a563caf277a68815250815260200160405180604001604052807f1cd262b02bf4ed62de65112b577137465f42c5c91205a59d93ae01ad9ef9b72181526020017f14c14c7d3c7d6f3e5b9a1c52fcaa0ad3878b3477ead5b9fd4257c7c583fb52988152508152508160200181905250604051806040016040528060405180604001604052807f2bee895d89cfa7b23390c41a15ee5fddc288c08a8845fdb7f9b25f94d16582b081526020017f05490a02464fe50de9ee75d4a0596c89e160cf6eb8b8fa6a51a9a48a2afc0e7d815250815260200160405180604001604052807f1119d375ea1dcaf1adfc72346c3a10f0e8c7125f0b53243923ab39011d89f1f581526020017f0ffb725378692deb77a8f3007d09d2b2166c755e7377e05aa6c90124cfb1c8788152508152508160400181905250604051806040016040528060405180604001604052807f1ba00e5a29df31aa818d797c3117519b322657bf7956ad7f5648fa97d6a08fc181526020017f11aac7bd001df564bf101a3547676f64e512fba4ffa28ae3ee3fa786f49de911815250815260200160405180604001604052807f2a84810b7ff807a942173d88adb1d82b27a4f6a717d9fc4cb835b924ed4e9d8481526020017f06e4be029ac5695f071a260fcb939751866dedc977de1814b72f8fb4c76a3a7b8152508152508160600181905250600567ffffffffffffffff8111156108475761084661137d565b5b60405190808252806020026020018201604052801561088057816020015b61086d611290565b8152602001906001900390816108655790505b50816080018190525060405180604001604052807f1ebc660b04111f5b187f8511a3e97523c6289b40f1ce31c6db5dd4d718dc9d6181526020017f024ca24d9dbceb3d3e62878a4d199bdf0d9eaaf6862fe47535f4b07afc3bad8c81525081608001516000815181106108f6576108f5611831565b5b602002602001018190525060405180604001604052807f2d255138d23b3737a81dc044934df7b4fa84db64ea1f88d4daf595700bcf693881526020017f0fbaabddc7ea66bc5b084503708573fe5775f0b08f123d8ece73bbc69c48d352815250816080015160018151811061096e5761096d611831565b5b602002602001018190525060405180604001604052807f1ca9f9f0fd473d78014c998e319a08e85cd648b6b8b3b2fc01bcf62b44354e1881526020017f034aa433d5b1237f0643f4058b7dace9de1d15dcc707d8bc2765210b7cda473981525081608001516002815181106109e6576109e5611831565b5b602002602001018190525060405180604001604052807f270aed11f4c037af54a42c630de22eb325222aa85724895f60e52b6c4e16165c81526020017f10ca404659c13dfe9c924cbf18ffc227952eb5055de301d2823767d3c2c322638152508160800151600381518110610a5e57610a5d611831565b5b602002602001018190525060405180604001604052807f2f0dca173df102901409fa5c8912fd5ad9d97e15c526a8bd8ccfb6543f549fae81526020017f19dbc6c283af4ca89038952d395bbb501a28b9dd71d7be4845171985a95bd0838152508160800151600481518110610ad657610ad5611831565b5b602002602001018190525090565b610aec611290565b610af46112aa565b836000015181600060038110610b0d57610b0c611831565b5b602002018181525050836020015181600160038110610b2f57610b2e611831565b5b6020020181815250508281600260038110610b4d57610b4c611831565b5b602002018181525050600060608360808460076107d05a03fa90508060008103610b7357fe5b5080610b7e57600080fd5b505092915050565b610b8e611290565b610b966112cc565b836000015181600060048110610baf57610bae611831565b5b602002018181525050836020015181600160048110610bd157610bd0611831565b5b602002018181525050826000015181600260048110610bf357610bf2611831565b5b602002018181525050826020015181600360048110610c1557610c14611831565b5b602002018181525050600060608360c08460066107d05a03fa90508060008103610c3b57fe5b5080610c4657600080fd5b505092915050565b610c56611290565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060008360000151148015610c93575060008360200151145b15610cb7576040518060400160405280600081526020016000815250915050610cee565b604051806040016040528084600001518152602001828560200151610cdc919061195c565b83610ce7919061198d565b8152509150505b919050565b600080600467ffffffffffffffff811115610d1157610d1061137d565b5b604051908082528060200260200182016040528015610d4a57816020015b610d37611290565b815260200190600190039081610d2f5790505b5090506000600467ffffffffffffffff811115610d6a57610d6961137d565b5b604051908082528060200260200182016040528015610da357816020015b610d906112ee565b815260200190600190039081610d885790505b5090508a82600081518110610dbb57610dba611831565b5b60200260200101819052508882600181518110610ddb57610dda611831565b5b60200260200101819052508682600281518110610dfb57610dfa611831565b5b60200260200101819052508482600381518110610e1b57610e1a611831565b5b60200260200101819052508981600081518110610e3b57610e3a611831565b5b60200260200101819052508781600181518110610e5b57610e5a611831565b5b60200260200101819052508581600281518110610e7b57610e7a611831565b5b60200260200101819052508381600381518110610e9b57610e9a611831565b5b6020026020010181905250610eb08282610ec0565b9250505098975050505050505050565b60008151835114610ed057600080fd5b6000835190506000600682610ee591906119c1565b905060008167ffffffffffffffff811115610f0357610f0261137d565b5b604051908082528060200260200182016040528015610f315781602001602082028036833780820191505090505b50905060005b838110156111b657868181518110610f5257610f51611831565b5b602002602001015160000151826000600684610f6e91906119c1565b610f7891906118d7565b81518110610f8957610f88611831565b5b602002602001018181525050868181518110610fa857610fa7611831565b5b602002602001015160200151826001600684610fc491906119c1565b610fce91906118d7565b81518110610fdf57610fde611831565b5b602002602001018181525050858181518110610ffe57610ffd611831565b5b60200260200101516000015160016002811061101d5761101c611831565b5b602002015182600260068461103291906119c1565b61103c91906118d7565b8151811061104d5761104c611831565b5b60200260200101818152505085818151811061106c5761106b611831565b5b60200260200101516000015160006002811061108b5761108a611831565b5b60200201518260036006846110a091906119c1565b6110aa91906118d7565b815181106110bb576110ba611831565b5b6020026020010181815250508581815181106110da576110d9611831565b5b6020026020010151602001516001600281106110f9576110f8611831565b5b602002015182600460068461110e91906119c1565b61111891906118d7565b8151811061112957611128611831565b5b60200260200101818152505085818151811061114857611147611831565b5b60200260200101516020015160006002811061116757611166611831565b5b602002015182600560068461117c91906119c1565b61118691906118d7565b8151811061119757611196611831565b5b60200260200101818152505080806111ae9061188f565b915050610f37565b506111bf611314565b6000602082602086026020860160086107d05a03fa905080600081036111e157fe5b50806111ec57600080fd5b60008260006001811061120257611201611831565b5b602002015114159550505050505092915050565b6040518060600160405280611229611290565b81526020016112366112ee565b8152602001611243611290565b81525090565b6040518060a0016040528061125c611290565b81526020016112696112ee565b81526020016112766112ee565b81526020016112836112ee565b8152602001606081525090565b604051806040016040528060008152602001600081525090565b6040518060600160405280600390602082028036833780820191505090505090565b6040518060800160405280600490602082028036833780820191505090505090565b6040518060400160405280611301611336565b815260200161130e611336565b81525090565b6040518060200160405280600190602082028036833780820191505090505090565b6040518060400160405280600290602082028036833780820191505090505090565b6000604051905090565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6113b58261136c565b810181811067ffffffffffffffff821117156113d4576113d361137d565b5b80604052505050565b60006113e7611358565b90506113f382826113ac565b919050565b6000819050919050565b61140b816113f8565b811461141657600080fd5b50565b60008135905061142881611402565b92915050565b60006040828403121561144457611443611367565b5b61144e60406113dd565b9050600061145e84828501611419565b600083015250602061147284828501611419565b60208301525092915050565b600080fd5b600067ffffffffffffffff82111561149e5761149d61137d565b5b602082029050919050565b600080fd5b60006114c16114bc84611483565b6113dd565b905080602084028301858111156114db576114da6114a9565b5b835b8181101561150457806114f08882611419565b8452602084019350506020810190506114dd565b5050509392505050565b600082601f8301126115235761152261147e565b5b60026115308482856114ae565b91505092915050565b60006080828403121561154f5761154e611367565b5b61155960406113dd565b905060006115698482850161150e565b600083015250604061157d8482850161150e565b60208301525092915050565b600061010082840312156115a05761159f611367565b5b6115aa60606113dd565b905060006115ba8482850161142e565b60008301525060406115ce84828501611539565b60208301525060c06115e28482850161142e565b60408301525092915050565b600067ffffffffffffffff8211156116095761160861137d565b5b602082029050919050565b6000611627611622846115ee565b6113dd565b90508060208402830185811115611641576116406114a9565b5b835b8181101561166a57806116568882611419565b845260208401935050602081019050611643565b5050509392505050565b600082601f8301126116895761168861147e565b5b6004611696848285611614565b91505092915050565b60008061018083850312156116b7576116b6611362565b5b60006116c585828601611589565b9250506101006116d785828601611674565b9150509250929050565b60008115159050919050565b6116f6816116e1565b82525050565b600060208201905061171160008301846116ed565b92915050565b600067ffffffffffffffff8211156117325761173161137d565b5b602082029050919050565b600061175061174b84611717565b6113dd565b9050806040840283018581111561176a576117696114a9565b5b835b81811015611793578061177f888261150e565b84526020840193505060408101905061176c565b5050509392505050565b600082601f8301126117b2576117b161147e565b5b60026117bf84828561173d565b91505092915050565b60008060008061018085870312156117e3576117e2611362565b5b60006117f18782880161150e565b94505060406118028782880161179d565b93505060c06118138782880161150e565b92505061010061182587828801611674565b91505092959194509250565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061189a826113f8565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036118cc576118cb611860565b5b600182019050919050565b60006118e2826113f8565b91506118ed836113f8565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111561192257611921611860565b5b828201905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b6000611967826113f8565b9150611972836113f8565b9250826119825761198161192d565b5b828206905092915050565b6000611998826113f8565b91506119a3836113f8565b9250828210156119b6576119b5611860565b5b828203905092915050565b60006119cc826113f8565b91506119d7836113f8565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615611a1057611a0f611860565b5b82820290509291505056fea2646970667358221220362fac4a7d3d2a5fd3d05f07af829c4f9e4b949238ae7bcf9fc087206f924cdc64736f6c634300080d0033608060405234801561001057600080fd5b50611a50806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063799afa761461003b578063aa2415221461006b575b600080fd5b6100556004803603810190610050919061169e565b61009b565b60405161006291906116fb565b60405180910390f35b610085600480360381019061008091906117c7565b610168565b60405161009291906116fb565b60405180910390f35b600080600467ffffffffffffffff8111156100b9576100b861137c565b5b6040519080825280602002602001820160405280156100e75781602001602082028036833780820191505090505b50905060005b60048110156101405783816004811061010957610108611830565b5b602002015182828151811061012157610120611830565b5b60200260200101818152505080806101389061188e565b9150506100ed565b50600061014d82866103e1565b0361015c576001915050610162565b60009150505b92915050565b6000610172611215565b60405180604001604052808760006002811061019157610190611830565b5b60200201518152602001876001600281106101af576101ae611830565b5b6020020151815250816000018190525060405180604001604052806040518060400160405280886000600281106101e9576101e8611830565b5b602002015160006002811061020157610200611830565b5b602002015181526020018860006002811061021f5761021e611830565b5b602002015160016002811061023757610236611830565b5b6020020151815250815260200160405180604001604052808860016002811061026357610262611830565b5b602002015160006002811061027b5761027a611830565b5b602002015181526020018860016002811061029957610298611830565b5b60200201516001600281106102b1576102b0611830565b5b602002015181525081525081602001819052506040518060400160405280856000600281106102e3576102e2611830565b5b602002015181526020018560016002811061030157610300611830565b5b602002015181525081604001819052506000600467ffffffffffffffff81111561032e5761032d61137c565b5b60405190808252806020026020018201604052801561035c5781602001602082028036833780820191505090505b50905060005b60048110156103b55784816004811061037e5761037d611830565b5b602002015182828151811061039657610395611830565b5b60200260200101818152505080806103ad9061188e565b915050610362565b5060006103c282846103e1565b036103d2576001925050506103d9565b6000925050505b949350505050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000190506000610411610578565b90508060800151516001865161042791906118d6565b1461043157600080fd5b60006040518060400160405280600081526020016000815250905060005b86518110156104ea578387828151811061046c5761046b611830565b5b60200260200101511061047e57600080fd5b6104d5826104d0856080015160018561049791906118d6565b815181106104a8576104a7611830565b5b60200260200101518a85815181106104c3576104c2611830565b5b6020026020010151610ae3565b610b85565b915080806104e29061188e565b91505061044f565b5061051481836080015160008151811061050757610506611830565b5b6020026020010151610b85565b905061055a8560000151866020015161052c84610c4d565b856040015161053e8a60400151610c4d565b87606001516105508960000151610c4d565b8960200151610cf2565b61056a5760019350505050610572565b600093505050505b92915050565b610580611248565b60405180604001604052807f12480fd9e482ee83000fb9d76218052640a1691eb6dacccb82174c5c756cb23e81526020017f02f2f0fe04bdacece77f5494a58803ea471d75977cb01d41825dc3a647ede4648152508160000181905250604051806040016040528060405180604001604052807f2defad74ff0f92be2d1186f8817254f9f1b53eaf004b6f64e927e333121e245681526020017e10794397d0e3bccc5be8c01b0d0d8d3105a8230c4883ad26f19692169823dc815250815260200160405180604001604052807f281544a51686e7ddb3bdd7ef9345a3e19ca752241e2329ca46593b96cb84007981526020017f0382c86c89db05f9f0d069ff7e30547950e48ba34ab122c0776d92cf3befaf748152508152508160200181905250604051806040016040528060405180604001604052807f0a21d2d38a8018f7075eb2e723eaf3bbe42dfd7870c930221288430d597da0bc81526020017f1a673b180878fdc6467178e1a2264413628c504148aa85e4fa19751ec6ba16fb815250815260200160405180604001604052807f0a5847104379fb0dcab2156c57e714d8750a02046429b236e71697ecc74086ef81526020017f088dee9e6467356dac63d424c7859eed28150e47db47c64d1146913104547d418152508152508160400181905250604051806040016040528060405180604001604052807f10b94b9561984465b72020672cac0bea0d245ffff512af5fa4d24a55c9bd59ae81526020017f1fdb892c958f67f83dd0bd40f1283b2de968e37ffb014352530a990359f78f0c815250815260200160405180604001604052807f29d49ece8595a3a251b5b16a99bfd9fa8a9f56a51a36a1909105635f7100eb7f81526020017f17a12e9b999f40597675e12dcd3ef910ce0469637b67f6a6bcfd3309d7b00e988152508152508160600181905250600567ffffffffffffffff8111156108465761084561137c565b5b60405190808252806020026020018201604052801561087f57816020015b61086c61128f565b8152602001906001900390816108645790505b50816080018190525060405180604001604052807f1cdb1bf9c1949b0823b58f88295110333e9c37f3b20223e30c5e068d8bb75a0f81526020017f1ee2f40efc703789aa4ee047560f858989321c7c2f7e4323eb3e9e29a2d3f34981525081608001516000815181106108f5576108f4611830565b5b602002602001018190525060405180604001604052807f2ddebef5a3ba7121d31e4b69f2d7a6ed0d981c84d9a9e1b106c7a2e8a2952ecf81526020017f28aedb422fc995b3efb52c771145cb0f020ec301f2ab218128f02ec91d85ae33815250816080015160018151811061096d5761096c611830565b5b602002602001018190525060405180604001604052807f2b1376393573cfa1850f1c6c5e5ae12c12b8c900a463d5bb3476587a9b6a4da281526020017f1e9da03176080eae38435eae7c730c43802bc15fc19be6ced56e4566a35d44a681525081608001516002815181106109e5576109e4611830565b5b602002602001018190525060405180604001604052807f0f27725ca77973fe6727c26fa794530d1591facae1145fbc5916c87a86507bd981526020017f1ba7919dd88470c5fa339cce42a5f177dcd06b5c685aa8b63bb59027aa1a7ba58152508160800151600381518110610a5d57610a5c611830565b5b602002602001018190525060405180604001604052807f0bb6e09c85b9b3887771d8f03890f867ecd8b3688b48e6eddc3fe545eb47a81b81526020017f191f61ba3728eb7ed9bcec536e46d9564a91721f95401ff1e801e6570e88fc5f8152508160800151600481518110610ad557610ad4611830565b5b602002602001018190525090565b610aeb61128f565b610af36112a9565b836000015181600060038110610b0c57610b0b611830565b5b602002018181525050836020015181600160038110610b2e57610b2d611830565b5b6020020181815250508281600260038110610b4c57610b4b611830565b5b602002018181525050600060608360808460076107d05a03fa90508060008103610b7257fe5b5080610b7d57600080fd5b505092915050565b610b8d61128f565b610b956112cb565b836000015181600060048110610bae57610bad611830565b5b602002018181525050836020015181600160048110610bd057610bcf611830565b5b602002018181525050826000015181600260048110610bf257610bf1611830565b5b602002018181525050826020015181600360048110610c1457610c13611830565b5b602002018181525050600060608360c08460066107d05a03fa90508060008103610c3a57fe5b5080610c4557600080fd5b505092915050565b610c5561128f565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060008360000151148015610c92575060008360200151145b15610cb6576040518060400160405280600081526020016000815250915050610ced565b604051806040016040528084600001518152602001828560200151610cdb919061195b565b83610ce6919061198c565b8152509150505b919050565b600080600467ffffffffffffffff811115610d1057610d0f61137c565b5b604051908082528060200260200182016040528015610d4957816020015b610d3661128f565b815260200190600190039081610d2e5790505b5090506000600467ffffffffffffffff811115610d6957610d6861137c565b5b604051908082528060200260200182016040528015610da257816020015b610d8f6112ed565b815260200190600190039081610d875790505b5090508a82600081518110610dba57610db9611830565b5b60200260200101819052508882600181518110610dda57610dd9611830565b5b60200260200101819052508682600281518110610dfa57610df9611830565b5b60200260200101819052508482600381518110610e1a57610e19611830565b5b60200260200101819052508981600081518110610e3a57610e39611830565b5b60200260200101819052508781600181518110610e5a57610e59611830565b5b60200260200101819052508581600281518110610e7a57610e79611830565b5b60200260200101819052508381600381518110610e9a57610e99611830565b5b6020026020010181905250610eaf8282610ebf565b9250505098975050505050505050565b60008151835114610ecf57600080fd5b6000835190506000600682610ee491906119c0565b905060008167ffffffffffffffff811115610f0257610f0161137c565b5b604051908082528060200260200182016040528015610f305781602001602082028036833780820191505090505b50905060005b838110156111b557868181518110610f5157610f50611830565b5b602002602001015160000151826000600684610f6d91906119c0565b610f7791906118d6565b81518110610f8857610f87611830565b5b602002602001018181525050868181518110610fa757610fa6611830565b5b602002602001015160200151826001600684610fc391906119c0565b610fcd91906118d6565b81518110610fde57610fdd611830565b5b602002602001018181525050858181518110610ffd57610ffc611830565b5b60200260200101516000015160016002811061101c5761101b611830565b5b602002015182600260068461103191906119c0565b61103b91906118d6565b8151811061104c5761104b611830565b5b60200260200101818152505085818151811061106b5761106a611830565b5b60200260200101516000015160006002811061108a57611089611830565b5b602002015182600360068461109f91906119c0565b6110a991906118d6565b815181106110ba576110b9611830565b5b6020026020010181815250508581815181106110d9576110d8611830565b5b6020026020010151602001516001600281106110f8576110f7611830565b5b602002015182600460068461110d91906119c0565b61111791906118d6565b8151811061112857611127611830565b5b60200260200101818152505085818151811061114757611146611830565b5b60200260200101516020015160006002811061116657611165611830565b5b602002015182600560068461117b91906119c0565b61118591906118d6565b8151811061119657611195611830565b5b60200260200101818152505080806111ad9061188e565b915050610f36565b506111be611313565b6000602082602086026020860160086107d05a03fa905080600081036111e057fe5b50806111eb57600080fd5b60008260006001811061120157611200611830565b5b602002015114159550505050505092915050565b604051806060016040528061122861128f565b81526020016112356112ed565b815260200161124261128f565b81525090565b6040518060a0016040528061125b61128f565b81526020016112686112ed565b81526020016112756112ed565b81526020016112826112ed565b8152602001606081525090565b604051806040016040528060008152602001600081525090565b6040518060600160405280600390602082028036833780820191505090505090565b6040518060800160405280600490602082028036833780820191505090505090565b6040518060400160405280611300611335565b815260200161130d611335565b81525090565b6040518060200160405280600190602082028036833780820191505090505090565b6040518060400160405280600290602082028036833780820191505090505090565b6000604051905090565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6113b48261136b565b810181811067ffffffffffffffff821117156113d3576113d261137c565b5b80604052505050565b60006113e6611357565b90506113f282826113ab565b919050565b6000819050919050565b61140a816113f7565b811461141557600080fd5b50565b60008135905061142781611401565b92915050565b60006040828403121561144357611442611366565b5b61144d60406113dc565b9050600061145d84828501611418565b600083015250602061147184828501611418565b60208301525092915050565b600080fd5b600067ffffffffffffffff82111561149d5761149c61137c565b5b602082029050919050565b600080fd5b60006114c06114bb84611482565b6113dc565b905080602084028301858111156114da576114d96114a8565b5b835b8181101561150357806114ef8882611418565b8452602084019350506020810190506114dc565b5050509392505050565b600082601f8301126115225761152161147d565b5b600261152f8482856114ad565b91505092915050565b60006080828403121561154e5761154d611366565b5b61155860406113dc565b905060006115688482850161150d565b600083015250604061157c8482850161150d565b60208301525092915050565b6000610100828403121561159f5761159e611366565b5b6115a960606113dc565b905060006115b98482850161142d565b60008301525060406115cd84828501611538565b60208301525060c06115e18482850161142d565b60408301525092915050565b600067ffffffffffffffff8211156116085761160761137c565b5b602082029050919050565b6000611626611621846115ed565b6113dc565b905080602084028301858111156116405761163f6114a8565b5b835b8181101561166957806116558882611418565b845260208401935050602081019050611642565b5050509392505050565b600082601f8301126116885761168761147d565b5b6004611695848285611613565b91505092915050565b60008061018083850312156116b6576116b5611361565b5b60006116c485828601611588565b9250506101006116d685828601611673565b9150509250929050565b60008115159050919050565b6116f5816116e0565b82525050565b600060208201905061171060008301846116ec565b92915050565b600067ffffffffffffffff8211156117315761173061137c565b5b602082029050919050565b600061174f61174a84611716565b6113dc565b90508060408402830185811115611769576117686114a8565b5b835b81811015611792578061177e888261150d565b84526020840193505060408101905061176b565b5050509392505050565b600082601f8301126117b1576117b061147d565b5b60026117be84828561173c565b91505092915050565b60008060008061018085870312156117e2576117e1611361565b5b60006117f08782880161150d565b94505060406118018782880161179c565b93505060c06118128782880161150d565b92505061010061182487828801611673565b91505092959194509250565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611899826113f7565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036118cb576118ca61185f565b5b600182019050919050565b60006118e1826113f7565b91506118ec836113f7565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156119215761192061185f565b5b828201905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b6000611966826113f7565b9150611971836113f7565b9250826119815761198061192c565b5b828206905092915050565b6000611997826113f7565b91506119a2836113f7565b9250828210156119b5576119b461185f565b5b828203905092915050565b60006119cb826113f7565b91506119d6836113f7565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615611a0f57611a0e61185f565b5b82820290509291505056fea2646970667358221220fa77d4594f9da3a9837265eff8b7328db71ae80256303a706374409a1b4ac1b864736f6c634300080d0033a26469706673582212206472c8a5522df5e50ba4cad1fd4835d64e9289014d49bee3fb0611b550c3a1bc64736f6c634300080d0033"


async function deploy_contract() {
    let token_name = $("#token-name").val();
    let token_symbol = $("#token-symbol").val();

    let signer = provider.getSigner(0);
    let factory = new ethers.ContractFactory(abi, bytecode, signer);
    let contract = await factory.deploy(String(token_name), String(token_symbol));

    $("#status-deploy-contract").html('<b style="color:green;">The contract is deployed with the address: ' + contract.address + '</b>');
}

async function mint_token() {
    let token_address = $("#mint-token-address").val();

    let signer = provider.getSigner(0);
    let contract = new ethers.Contract(String(token_address), abi, signer);

    contract.mint().then((tx) => {
        console.log(tx);
        $("#status-mint-token").html('<b style="color:green;">The private token is minted with the transaction hash: ' + tx.hash + '<br> Your initial balance is 1 and initial secure number is 0</b>');
    });
}

async function request_to_send() {
    let token_address = $("#request-consent-token-address").val();
    let user_address = $("#request-consent-user-address").val();

    let signer = provider.getSigner(0);
    let contract = new ethers.Contract(String(token_address), abi, signer);

    contract.requestToSend(user_address).then((tx) => {
        console.log(tx);
        $("#status-request-consent").html('<b style="color:green;">The consent is requested with the transaction hash: ' + tx.hash + '</b>');
    });
}

async function consent_to_send() {
    let token_address = $("#give-consent-token-address").val();
    let user_address = $("#give-consent-user-address").val();
    
    let signer = provider.getSigner(0);
    let contract = new ethers.Contract(String(token_address), abi, signer);

    const consent_signer = provider.getSigner()
    const ethAddress = await consent_signer.getAddress()
    const hash = await ethers.utils.keccak256(ethAddress)
    const signature = await signer.signMessage(ethers.utils.arrayify(hash))
    const recoveredPublicKey = ethers.utils.recoverPublicKey(ethers.utils.arrayify(ethers.utils.hashMessage(ethers.utils.arrayify(hash))), signature);

    console.log(hash);
    console.log(signature);
    console.log(recoveredPublicKey);
    
    contract.consentToSend(user_address, String(recoveredPublicKey)).then((tx) => {
        console.log(tx);
        $("#status-give-consent").html('<b style="color:green;">The consent is given with the transaction hash: ' + tx.hash + '</b>');
    }); 
}

async function send_token() {
    $("#send-token-loader").show();

    let token_address = $("#send-token-address").val();
    let user_address = $("#send-user-address").val();
    let amount = $("#send-amount").val();
    let current_balance = $("#send-current-balance").val();
    let before_blind = $("#send-secure-number").val();
    let next_balance = current_balance - amount;

    let signer = provider.getSigner(0);
    let contract = new ethers.Contract(String(token_address), abi, signer);

    let value_blind = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER); // Math.random()*(10**17);
    let after_blind = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);
    
    let hashes = await zokrates_hash(String(before_blind), String(current_balance), String(value_blind), String(amount), String(after_blind), String(next_balance));
    let [before_hash, value_hash, after_hash] = JSON.parse(hashes);

    let public_key = await contract.getPublicKey(String(user_address));
    let ciphertext = await encrypt(public_key.substr(2), String(amount) + " " + String(value_blind)); 

    console.time('Sender Proof Generation Time')

    let proof = await zokrates_sender_proof(String(amount), String(current_balance), String(value_blind), String(before_blind), String(after_blind), String(value_hash), String(before_hash), String(after_hash));

    console.timeEnd('Sender Proof Generation Time')

    console.log(proof.proof.a);
    console.log(proof.proof.b);
    console.log(proof.proof.c); 

    let tx = await contract.privateSend(String(user_address), String(value_hash), String(after_hash), String(ciphertext), proof.proof.a, proof.proof.b, proof.proof.c);

    $("#status-send-token").html('<b style="color:green;">The token is sent with the transaction hash: ' + tx.hash + '<br>Your balance is ' + next_balance + ' and secure number is ' + after_blind + '</b>');
       
    $("#send-token-loader").hide();
}

async function receive_token() {
    $("#receive-token-loader").show();

    let token_address = $("#receive-token-address").val();
    let user_address = $("#receive-user-address").val();
    let private_key = $("#receive-private-key").val();
    let current_balance = $("#receive-current-balance").val();
    let before_blind = $("#receive-secure-number").val();

    let signer = provider.getSigner(0);
    let contract = new ethers.Contract(token_address, abi, signer);

    let after_blind = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);

    let ciphertext = await contract.getMessage(String(user_address));
    let plaintext = await decrypt(private_key, ciphertext);

    let amount = parseInt(plaintext.split(" ")[0]);
    let value_blind = parseInt(plaintext.split(" ")[1]);
    let next_balance = parseInt(current_balance) + amount;

    console.log(amount, value_blind)

    let hashes = await zokrates_hash(String(before_blind), String(current_balance), String(value_blind), String(amount), String(after_blind), String(next_balance));
    let [before_hash, value_hash, after_hash] = JSON.parse(hashes);

    console.log(before_hash, value_hash, after_hash);

    console.time('Receiver Proof Generation Time')

    let proof = await zokrates_receiver_proof(String(amount), String(current_balance), String(value_blind), String(before_blind), String(after_blind), String(value_hash), String(before_hash), String(after_hash));

    console.timeEnd('Receiver Proof Generation Time')

    console.log(proof.proof.a);
    console.log(proof.proof.b);
    console.log(proof.proof.c); 

    let tx = await contract.privateReceive(String(user_address), String(value_hash), String(after_hash), proof.proof.a, proof.proof.b, proof.proof.c);

    $("#status-receive-token").html('<b style="color:green;">The token is received with the transaction hash: ' + tx.hash + '<br> Your balance is ' + next_balance + ' and secure number is ' + after_blind +'</b>');
       
    $("#receive-token-loader").hide();
}